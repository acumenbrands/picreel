!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){(function(){var a=function(){function a(a){var a=a||{};return this.trackers="trackers"in a?a.trackers:{},this}a.prototype.registerTracker=function(a,b){this.trackers[a]=b},a.prototype.track=function(a,b){this.trackers[a].push(b)};return a}();b.exports=a}).call(this)},{}],2:[function(a,b,c){var d=a("../adapters/trackers");(function(){var a=function(){function a(a){for(arg in a)"undefined"==typeof this.arg&&(this[arg]=a[arg]);this.topWindow=b(),this.$=this.$||window.jQuery,this.requestUrl=this.getRequestUrl()||window.location.href,this.lists=this.lists||[],this.submitSelector=this.submitSelector||".submit",this.emailSelector=this.emailSelector||"input[name='email']",this.errorClass=this.errorClass||"subscriber-error",this.loadingClass=this.loadingClass||"subscriber-loading",this.onerror=this.onerror||g,this.onsuccess=this.onsuccess||g,this.oncomplete=this.oncomplete||g,this.vars=this.vars||[],this.event=this.event||null,this.action=this.action||"/",this.eventAction=this.eventAction||"",this.eventCategory=this.eventCategory||"",this.eventValue=this.eventValue||0,this.eventNonInteraction=this.eventNonInteraction||"",this.trackers=new d,this.carrier=null,this.trackers.registerTracker("GTM",this.topWindow.dataLayer),c(this),this.buildSubscriberLists(),_bindNewClickEvents(this)}a.prototype.buildSubscriberLists=function(){this.list&&this.lists.push(this.list)},a.prototype.applyErrorStatus=function(){},a.prototype.applyErrorStatus=function(){this.$(this.emailSelector).addClass(this.errorClass)},a.prototype.removeErrorStatus=function(){this.$(this.emailSelector).removeClass(this.errorClass)},a.prototype.applyLoadingStatus=function(){this.$(this.emailSelector).addClass(this.loadingClass)},a.prototype.removeLoadingStatus=function(){this.$(this.emailSelector).removeClass(this.loadingClass)},a.prototype.getRequestUrl=function(){var a=this.$('input[name="request_url"]').val();return a?a:null},a.prototype.handleButtonClick=function(a){var b=this.$(this.emailSelector).val();this.removeErrorStatus(),this.applyLoadingStatus(),this.emailIsValid(b)?(e(this),this.submit()):this.handleError()},a.prototype.emailIsValid=function(a){var b=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return b.test(a)},a.prototype.formToCarrierParams=function(){var a={};if(a.email=this.$(this.emailSelector).val(),this.vars.length&&(a.vars=this.vars),this.event&&(a.event=this.event),this.lists.length){a.lists=[];for(var b=0;b<this.lists.length;b++)a.lists.push(this.lists[b])}return a},a.prototype.handleSuccess=function(){"function"==typeof this.onsuccess&&this.onsuccess(),this.$(self).trigger("onPicAfterSubmit")},a.prototype.handleError=function(){"function"==typeof this.onerror&&this.onerror(),this.removeLoadingStatus(),this.applyErrorStatus()},a.prototype.handleComplete=function(){"function"==typeof this.oncomplete&&this.oncomplete(),this.removeLoadingStatus()},a.prototype.submit=function(){var a=this,b={url:a.action,data:a.formToCarrierParams(),dataType:"jsonp",complete:function(){a.handleComplete()},success:function(){a.handleSuccess()},error:function(){a.handleError()},crossDomain:!0};this.carrier=this.$.ajax(b)},_bindNewClickEvents=function(a){a.$(window).on("onBeforeSubmit",function(b){a.handleButtonClick(b)}),a.$("body").on("pr:onPicAfterClose",function(b){f(a)})};var b=function(){for(var a=window;a!==a.parent;)a=a.parent;return a},c=function(a){var b={event:"trackAnalyticsEvent",eventCategory:a.eventCategory,eventAction:"View",eventNonInteraction:!0};a.trackers.track("GTM",b)},e=function(a){var b={event:"trackAnalyticsEvent",eventCategory:a.eventCategory,eventAction:a.eventAction};a.trackers.track("GTM",b)},f=function(a){var b={event:"trackAnalyticsEvent",eventCategory:a.eventCategory,eventAction:"Close"};a.trackers.track("GTM",b)},g=function(){};return a}();b.exports=a}).call(this)},{"../adapters/trackers":1}],3:[function(a,b,c){(function(){window.APLSubscriber=a("./factories/subscriber")}).call(this)},{"./factories/subscriber":2}]},{},[1,2,3]);
//# sourceMappingURL=picreel.min.js.map